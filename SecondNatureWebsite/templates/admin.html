{% extends "layout.html" %}

{% block body %}
<h1>Welcome back {{ current_user.username }}</h1>

<hr>
<div class="row">
	<div class="column span6">
		<h3>{{ formType }} Post</h3>

		{# display any Flash/Session messages #}
		{% with messages = get_flashed_messages() %}
          {% if messages %}
            {% for message in messages %}
              <p><span class="alert alert-success">{{ message }}</span></p>
            {% endfor %}
          {% endif %}
        {% endwith %}
        {# end of Flash/Sesssion messages #}

        {# display form errors #}
		{% if form.errors %}
	    <ul class="errors">
	        {% for field_name, field_errors in form.errors|dictsort if field_errors %}
	            {% for error in field_errors %}
	                <li class="alert">{{ form[field_name].label }}: {{ error }}</li>
	            {% endfor %}
	        {% endfor %}
	    </ul>
		{% endif %}


		<form method="POST">
			{# 
			Csrf token will be a unique token generated by Flask to validate real user is submitting the form. A form post without the token will not be processed.
			#}
			{{ form.csrf_token }}

			{{ form.title.label}}
			{{ form.title }}

			{{ form.content.label }}
			{{ form.content }}
			<br>
			<input type="submit" value="Save Post">
		</form>

	</div>

	<div class="column span6">
		<h3>Edit Posts</h3>
		{% for c in allContent %}
			<div class="">
				<a href="/admin/{{c.id}}">{{ c.title }}</a>
				<br>
				{{ c.content}}
				<br>
				by: <a href="/users/{{ c.user.username }}">{{ c.user.username }}</a>
			</div>
			<hr>
		{% endfor %}
	</div>

{% endblock %}